# å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ“ å‡†å¤‡å·¥ä½œï¼ˆ5åˆ†é’Ÿï¼‰

### 1. è·å–ENTSO-E API Token

1. æ‰“å¼€æµè§ˆå™¨è®¿é—®: https://transparency.entsoe.eu/
2. ç‚¹å‡»å³ä¸Šè§’ `Login / Register`
3. æ³¨å†Œæ–°è´¦å·ï¼ˆæˆ–ä½¿ç”¨å·²æœ‰è´¦å·ç™»å½•ï¼‰
4. ç™»å½•åï¼Œç‚¹å‡»å³ä¸Šè§’ç”¨æˆ·å
5. é€‰æ‹© `My Account` > `Web API Access`
6. ç‚¹å‡»ç»¿è‰²æŒ‰é’® `Generate Token`
7. å¤åˆ¶ç”Ÿæˆçš„Tokenï¼ˆä¸€é•¿ä¸²å­—ç¬¦ï¼‰

**é‡è¦**: ä¿ç®¡å¥½ä½ çš„Tokenï¼Œä¸è¦åˆ†äº«ç»™ä»–äººï¼

### 2. é…ç½®Token

**Windowsç”¨æˆ·**:
```powershell
# åœ¨PowerShellä¸­è®¾ç½®ç¯å¢ƒå˜é‡
$env:ENTSOE_API_TOKEN = "ä½ çš„Token"
```

æˆ–è€…ç›´æ¥ç¼–è¾‘ `config/api_config.py` æ–‡ä»¶:
```python
API_TOKEN = 'ä½ çš„Token'  # æ›¿æ¢è¿™é‡Œ
```

**Macç”¨æˆ·**:
```bash
# åœ¨ç»ˆç«¯ä¸­è®¾ç½®ç¯å¢ƒå˜é‡
export ENTSOE_API_TOKEN="ä½ çš„Token"
```

## ğŸš€ è¿è¡Œé¡¹ç›®ï¼ˆ3æ­¥ï¼‰

### Windows

```batch
# æ­¥éª¤1: å®‰è£…ä¾èµ–ï¼ˆåªéœ€è¿è¡Œä¸€æ¬¡ï¼‰
D:\anaconda\python.exe -m pip install -r requirements.txt

# æ­¥éª¤2: ä¸€é”®è¿è¡Œæ‰€æœ‰æµç¨‹
run_pipeline.bat
```

### Mac

```bash
# æ­¥éª¤1: å®‰è£…ä¾èµ–ï¼ˆåªéœ€è¿è¡Œä¸€æ¬¡ï¼‰
pip3 install -r requirements.txt

# æ­¥éª¤2: ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x run_pipeline.sh

# æ­¥éª¤3: ä¸€é”®è¿è¡Œæ‰€æœ‰æµç¨‹
./run_pipeline.sh
```

## ğŸ“Š è¿è¡Œæµç¨‹è¯´æ˜

ä¸€é”®è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹4ä¸ªæ­¥éª¤:

### 1ï¸âƒ£ è·å–APIæ•°æ® (1-2åˆ†é’Ÿ)
- ä»ENTSO-Eè·å–æœ€è¿‘30å¤©çš„SE3åŒºåŸŸç”µä»·æ•°æ®
- ä¿å­˜åˆ° `data/api_data/entsoe_se3_latest.csv`

### 2ï¸âƒ£ åˆ›å»ºç‰¹å¾ (10-30ç§’)
- ä»åŸå§‹ä»·æ ¼æ•°æ®åˆ›å»º62ä¸ªæœºå™¨å­¦ä¹ ç‰¹å¾
- ä¿å­˜åˆ° `features/features_latest.csv`

### 3ï¸âƒ£ è®­ç»ƒæ¨¡å‹ (1-2åˆ†é’Ÿ)
- è®­ç»ƒXGBoostå’ŒLightGBMæ¨¡å‹
- ä¿å­˜æ¨¡å‹åˆ° `models/xgboost_latest.pkl` å’Œ `models/lightgbm_latest.pkl`
- æ˜¾ç¤ºæ¨¡å‹æ€§èƒ½å¯¹æ¯”

### 4ï¸âƒ£ å¯åŠ¨Webåº”ç”¨
- å¯åŠ¨Streamlitç½‘é¡µåº”ç”¨
- è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:8501`
- å¯ä»¥æŸ¥çœ‹24å°æ—¶ç”µä»·é¢„æµ‹

## ğŸ’¡ ä½¿ç”¨Webåº”ç”¨

å¯åŠ¨æˆåŠŸåï¼Œä½ ä¼šçœ‹åˆ°:

```
  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://192.168.x.x:8501
```

### ä¸»è¦åŠŸèƒ½:

1. **å®æ—¶é¢„æµ‹**: æŸ¥çœ‹æœªæ¥24å°æ—¶çš„ç”µä»·é¢„æµ‹
2. **ä»·æ ¼è¶‹åŠ¿**: æœ€è¿‘7å¤©å†å² + 24å°æ—¶é¢„æµ‹çš„è¶‹åŠ¿å›¾
3. **æ—¥å†…æ¨¡å¼**: ä¸€å¤©ä¸­ä¸åŒå°æ—¶çš„ä»·æ ¼åˆ†å¸ƒ
4. **ç”¨ç”µå»ºè®®**:
   - âœ… æœ€ä½³ç”¨ç”µæ—¶æ®µï¼ˆä»·æ ¼æœ€ä½ï¼‰
   - âŒ é¿å…ç”¨ç”µæ—¶æ®µï¼ˆä»·æ ¼æœ€é«˜ï¼‰
   - ğŸ’° ä½ä»·æ—¶æ®µç»Ÿè®¡
   - ğŸ“Š ä»·æ ¼æ³¢åŠ¨åˆ†æ
5. **è¯¦ç»†æ•°æ®**: æŸ¥çœ‹æ¯å°æ—¶çš„å…·ä½“é¢„æµ‹ä»·æ ¼

### ä¾§è¾¹æ é€‰é¡¹:

- **é€‰æ‹©æ¨¡å‹**: XGBoost æˆ– LightGBM
- **é¢„æµ‹æ—¶é•¿**: 6-72å°æ—¶
- **åˆ·æ–°æ•°æ®**: é‡æ–°è·å–æœ€æ–°APIæ•°æ®

## ğŸ”„ æ›´æ–°æ•°æ®

### æ‰‹åŠ¨æ›´æ–°

å¦‚æœæƒ³è·å–æœ€æ–°æ•°æ®ï¼Œåªéœ€é‡æ–°è¿è¡Œä¸€é”®è„šæœ¬:
```batch
# Windows
run_pipeline.bat

# Mac
./run_pipeline.sh
```

### è‡ªåŠ¨æ›´æ–°

**Windowså®šæ—¶ä»»åŠ¡** (æ¯å¤©æ—©ä¸Š6ç‚¹è‡ªåŠ¨æ›´æ–°):
```batch
schtasks /create /tn "ElectricityPriceUpdate" /tr "D:\KTH\ID2223\Project\api_version\run_pipeline.bat" /sc daily /st 06:00
```

**Macå®šæ—¶ä»»åŠ¡** (ä½¿ç”¨cron):
```bash
# ç¼–è¾‘crontab
crontab -e

# æ·»åŠ è¿™ä¸€è¡Œï¼ˆæ¯å¤©6ç‚¹è¿è¡Œï¼‰
0 6 * * * cd /path/to/api_version && ./run_pipeline.sh
```

## â“ å¸¸è§é—®é¢˜

### Q1: API Tokenæ— æ•ˆ

**ç°è±¡**: æ˜¾ç¤º `APIè¯·æ±‚å¤±è´¥: HTTP 401`

**è§£å†³**:
1. æ£€æŸ¥Tokenæ˜¯å¦æ­£ç¡®å¤åˆ¶ï¼ˆæ²¡æœ‰å¤šä½™ç©ºæ ¼ï¼‰
2. ç¡®è®¤ç½‘é¡µä¸ŠTokençŠ¶æ€æ˜¾ç¤ºä¸º `ACTIVE`
3. å°è¯•é‡æ–°ç”ŸæˆToken

### Q2: æ²¡æœ‰pipå‘½ä»¤

**ç°è±¡**: `'pip' ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤`

**è§£å†³**:
```batch
# Windowsä½¿ç”¨å®Œæ•´è·¯å¾„
D:\anaconda\python.exe -m pip install -r requirements.txt

# Macä½¿ç”¨pip3
pip3 install -r requirements.txt
```

### Q3: ç«¯å£8501è¢«å ç”¨

**ç°è±¡**: `Port 8501 is in use by another program`

**è§£å†³**:
```batch
# æŒ‡å®šå…¶ä»–ç«¯å£è¿è¡Œ
streamlit run app_api.py --server.port 8502
```

### Q4: æ•°æ®è·å–å¾ˆæ…¢

**åŸå› **: APIæœåŠ¡å™¨å¯èƒ½åœ¨å›½å¤–ï¼Œç½‘ç»œå»¶è¿Ÿè¾ƒé«˜

**è§£å†³**:
- è€å¿ƒç­‰å¾…ï¼Œé€šå¸¸1-2åˆ†é’Ÿå®Œæˆ
- å‡å°‘è·å–å¤©æ•°ï¼ˆä¿®æ”¹ `config/api_config.py` ä¸­çš„ `DEFAULT_DAYS`ï¼‰

### Q5: æ¨¡å‹é¢„æµ‹ä¸å‡†ç¡®

**åŸå› **: å¯èƒ½éœ€è¦æ›´å¤šè®­ç»ƒæ•°æ®

**è§£å†³**:
1. å¢åŠ è·å–å¤©æ•°: ä¿®æ”¹ `DEFAULT_DAYS = 60`
2. é‡æ–°è¿è¡Œå®Œæ•´æµç¨‹
3. æ¨¡å‹ä¼šéšç€æ•°æ®å¢å¤šè€Œæ”¹å–„

## ğŸ“ˆ æŸ¥çœ‹ç»“æœ

è¿è¡ŒæˆåŠŸåï¼Œä½ å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®æ‰¾åˆ°ç”Ÿæˆçš„æ–‡ä»¶:

```
api_version/
â”œâ”€â”€ data/api_data/
â”‚   â””â”€â”€ entsoe_se3_latest.csv        # åŸå§‹APIæ•°æ®
â”œâ”€â”€ features/
â”‚   â””â”€â”€ features_latest.csv          # ç‰¹å¾æ•°æ®
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ xgboost_latest.pkl           # XGBoostæ¨¡å‹
â”‚   â”œâ”€â”€ lightgbm_latest.pkl          # LightGBMæ¨¡å‹
â”‚   â”œâ”€â”€ xgboost_metrics_latest.json  # XGBoostæ€§èƒ½
â”‚   â”œâ”€â”€ lightgbm_metrics_latest.json # LightGBMæ€§èƒ½
â”‚   â””â”€â”€ model_comparison_latest.csv  # æ¨¡å‹å¯¹æ¯”
```

## ğŸ¯ ä¸‹ä¸€æ­¥

å®Œæˆå¿«é€Ÿå¼€å§‹åï¼Œä½ å¯ä»¥:

1. **è°ƒæ•´å‚æ•°**: ä¿®æ”¹ `config/api_config.py` ä¸­çš„é…ç½®
2. **ä¼˜åŒ–æ¨¡å‹**: è¿è¡Œ `scripts/analysis/optimize_models.py`
3. **åˆ†æç‰¹å¾**: è¿è¡Œ `scripts/analysis/analyze_feature_importance.py`
4. **åˆ‡æ¢åŒºåŸŸ**: ä¿®æ”¹ `DEFAULT_ZONE` ä¸º SE1, SE2, SE4
5. **å®šåˆ¶åº”ç”¨**: ä¿®æ”¹ `app_api.py` æ·»åŠ æ–°åŠŸèƒ½

## ğŸ’» æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼Ÿ

1. æŸ¥çœ‹å®Œæ•´æ–‡æ¡£: `README.md`
2. æ£€æŸ¥æ—¥å¿—è¾“å‡ºä¸­çš„é”™è¯¯ä¿¡æ¯
3. ç¡®è®¤æ‰€æœ‰ä¾èµ–åŒ…å·²æ­£ç¡®å®‰è£…
4. å‚è€ƒENTSO-Eå®˜æ–¹æ–‡æ¡£: https://transparency.entsoe.eu/api-guide

---

ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼âš¡
